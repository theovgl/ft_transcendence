{"ast":null,"code":"var _jsxFileName = \"/home/mtogbe/ft_transcendence/apps/pong/src/components/Collectible.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport collectibleImg from '../img/Collectible.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Collectible = props => {\n  _s();\n  const [position, setPosition] = useState({\n    x: props.gameBounds.width / 2,\n    y: props.gameBounds.height / 2\n  });\n  const [percentagePos, setPercentagePos] = useState({\n    x: position.x / props.gameBounds.width * 100,\n    y: position.y / props.gameBounds.height * 100\n  });\n  const collectibleRef = useRef(null);\n\n  // Resize Hitboxes\n  useEffect(() => {\n    const calculateHitBox = () => {\n      if (ballRef.current) {\n        const {\n          left,\n          top,\n          width,\n          height\n        } = ballRef.current.getBoundingClientRect();\n        setBounds({\n          x: left,\n          y: top,\n          width: width,\n          height: height\n        });\n      }\n      setPosition({\n        x: percentagePos.x / 100 * props.gameBounds.width,\n        y: percentagePos.y / 100 * props.gameBounds.height\n      });\n      const {\n        x,\n        y,\n        width,\n        height\n      } = props.gameBounds;\n      setGameBounds({\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      });\n    };\n    if (JSON.stringify(props.gameBounds) !== JSON.stringify(gamebounds)) calculateHitBox();\n  }, [ballRef, percentagePos.x, percentagePos.y, props.gameBounds, gamebounds]);\n\n  // Collectible spawn\n  props.socket.on('collectible-spawn', pos => {\n    setPercentagePos({\n      x: pos.x,\n      y: pos.y\n    });\n  });\n\n  // Set Responsive position\n  useEffect(() => {\n    setPercentagePos({\n      x: position.x / gamebounds.width * 100,\n      y: position.y / gamebounds.height * 100\n    });\n  }, [position.x, position.y, gamebounds.width, gamebounds.height]);\n  return /*#__PURE__*/_jsxDEV(CollectibleDiv, {\n    ref: collectibleRef,\n    x: percentagePos.x,\n    y: percentagePos.y,\n    children: /*#__PURE__*/_jsxDEV(CollectibleDivImg, {\n      src: collectibleImg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n_s(Collectible, \"DESqeJlvfdLOCKz/n4R4unOh0EA=\");\n_c = Collectible;\nconst CollectibleDivImg = styled.img`\nwidth: 100%;\nheight: 100%;\n`;\n_c2 = CollectibleDivImg;\nconst CollectibleDiv = styled.div.attrs(props => ({\n  style: {\n    width: `4%`,\n    height: `5%`,\n    left: `${props.x}%`,\n    top: `${props.y}%`\n  }\n}))`\n    position: absolute;\n    `;\n_c3 = CollectibleDiv;\nexport default Collectible;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Collectible\");\n$RefreshReg$(_c2, \"CollectibleDivImg\");\n$RefreshReg$(_c3, \"CollectibleDiv\");","map":{"version":3,"names":["React","useEffect","useState","useRef","styled","collectibleImg","jsxDEV","_jsxDEV","Collectible","props","_s","position","setPosition","x","gameBounds","width","y","height","percentagePos","setPercentagePos","collectibleRef","calculateHitBox","ballRef","current","left","top","getBoundingClientRect","setBounds","setGameBounds","JSON","stringify","gamebounds","socket","on","pos","CollectibleDiv","ref","children","CollectibleDivImg","src","fileName","_jsxFileName","lineNumber","columnNumber","_c","img","_c2","div","attrs","style","_c3","$RefreshReg$"],"sources":["/home/mtogbe/ft_transcendence/apps/pong/src/components/Collectible.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport styled from 'styled-components';\r\nimport collectibleImg from '../img/Collectible.png'\r\n\r\nconst Collectible = (props) => {\r\n    const [position, setPosition] = useState({\r\n        x: props.gameBounds.width / 2,\r\n        y: props.gameBounds.height / 2\r\n      });\r\n    const [percentagePos, setPercentagePos] = useState({\r\n        x: (position.x / props.gameBounds.width) * 100,\r\n        y: (position.y / props.gameBounds.height) * 100\r\n    })\r\n    \r\n    const collectibleRef = useRef(null);\r\n\r\n    \r\n    // Resize Hitboxes\r\n    useEffect(() => {\r\n      const calculateHitBox = () => {\r\n        if (ballRef.current)\r\n        {\r\n          const { left, top, width, height } = ballRef.current.getBoundingClientRect();\r\n          setBounds({ x: left, y: top, width: width, height: height });\r\n        }\r\n        setPosition({\r\n          x : (percentagePos.x / 100) * props.gameBounds.width,\r\n          y : (percentagePos.y / 100) * props.gameBounds.height\r\n        })\r\n        const { x, y, width, height } = props.gameBounds;\r\n        setGameBounds({x: x, y: y, width: width, height: height});\r\n      }\r\n\r\n      if (JSON.stringify(props.gameBounds) !== JSON.stringify(gamebounds))\r\n        calculateHitBox();\r\n  \r\n    }, [ballRef, percentagePos.x, percentagePos.y, props.gameBounds, gamebounds]);\r\n\r\n    // Collectible spawn\r\n    props.socket.on('collectible-spawn', (pos) => {\r\n        setPercentagePos({\r\n          x: pos.x,\r\n          y: pos.y,\r\n        })\r\n    })\r\n\r\n\r\n    // Set Responsive position\r\n    useEffect(() => {\r\n        setPercentagePos({\r\n          x : (position.x / gamebounds.width) * 100,\r\n          y : (position.y / gamebounds.height) * 100\r\n        })\r\n    }, [position.x, position.y, gamebounds.width, gamebounds.height])\r\n    \r\n    return (\r\n        <CollectibleDiv ref={collectibleRef} x={percentagePos.x} y={percentagePos.y}>\r\n          <CollectibleDivImg src={collectibleImg}></CollectibleDivImg>\r\n          </CollectibleDiv>\r\n    );\r\n}\r\n\r\nconst CollectibleDivImg = styled.img`\r\nwidth: 100%;\r\nheight: 100%;\r\n`;\r\n\r\nconst CollectibleDiv = styled.div.attrs(props => ({\r\n    style: {\r\n        width: `4%`,\r\n        height: `5%`,\r\n        left: `${props.x}%`,\r\n        top: `${props.y}%`,\r\n    }\r\n    }))`\r\n    position: absolute;\r\n    `;\r\n    \r\nexport default Collectible;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}