{"ast":null,"code":"var _jsxFileName = \"/home/mtogbe/ft_transcendence/apps/pong/src/components/GameManager.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst START_TIMER = 3;\nconst GameManager = /*#__PURE__*/_s( /*#__PURE__*/React.forwardRef(_c = _s((props, ref) => {\n  _s();\n  const [timer, setTimer] = useState(START_TIMER);\n  const [forfeit, setForfeit] = useState(false);\n  useEffect(() => {\n    if (props.socket !== null) {\n      props.socket.on('ready-timer', server_timer => {\n        setTimer(server_timer);\n      });\n    }\n  }, [props.socket]);\n  useEffect(() => {\n    if (props.socket !== null) {\n      props.socket.on('forfeit', () => {\n        setForfeit(true);\n        // props.socket.disconnect();\n      });\n    }\n  }, [forfeit, props.socket]);\n  useEffect(() => {\n    let intervalId;\n    if (timer > 0) {\n      if (props.socket === null) {\n        intervalId = setInterval(() => {\n          setTimer(timer - 1);\n        }, 1000);\n      }\n      if (ref.current) ref.current.innerText = \"Ready \\n\\t \" + timer;\n    } else if (ref.current && !ref.current.innerText.includes(\"Click to play\")) {\n      intervalId = setInterval(() => {\n        if (props.scoreRight.current.innerText === \"10\") ref.current.innerText = \"J2 wins ! \\n Click to quit\";else if (props.scoreLeft.current.innerText === \"10\") ref.current.innerText = \"J1 wins ! \\n Click to quit\";else if (forfeit) ref.current.innerText = \"You win ! \\n Click to quit\";else ref.current.innerText = \"\";\n      }, 10);\n    }\n    return () => clearInterval(intervalId);\n  }, [timer, ref, props.scoreLeft, props.scoreRight, forfeit, props.socket]);\n  const HandleReplay = () => {\n    if (ref.current.innerText.includes(\"Click to quit\")) {\n      props.scoreLeft.current.innerText = \"00\";\n      props.scoreRight.current.innerText = \"00\";\n      props.quitEvent();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(GameManagerDiv, {\n    onClick: HandleReplay,\n    ref: ref,\n    width: props.width,\n    height: props.height\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}, \"Z81a3rBUbXY7LXuY+g3Gw0u9cuM=\")), \"Z81a3rBUbXY7LXuY+g3Gw0u9cuM=\");\n_c2 = GameManager;\nconst GameManagerDiv = styled.div`\n  height: 100%;\n  width: 100%;\n  text-align: center;\n  top: 20%;\n  color: red;\n  text-shadow: 2px 0 #fff, -2px 0 #fff, 0 2px #fff, 0 -2px #fff,\n               1px 1px #fff, -1px -1px #fff, 1px -1px #fff, -1px 1px #fff;\n  font-family: 'Keania One', sans-serif;\n  font-size: 10vw;\n  position: absolute;\n`;\n_c3 = GameManagerDiv;\nexport default GameManager;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"GameManager$React.forwardRef\");\n$RefreshReg$(_c2, \"GameManager\");\n$RefreshReg$(_c3, \"GameManagerDiv\");","map":{"version":3,"names":["React","useEffect","useState","styled","jsxDEV","_jsxDEV","START_TIMER","GameManager","_s","forwardRef","_c","props","ref","timer","setTimer","forfeit","setForfeit","socket","on","server_timer","intervalId","setInterval","current","innerText","includes","scoreRight","scoreLeft","clearInterval","HandleReplay","quitEvent","GameManagerDiv","onClick","width","height","fileName","_jsxFileName","lineNumber","columnNumber","_c2","div","_c3","$RefreshReg$"],"sources":["/home/mtogbe/ft_transcendence/apps/pong/src/components/GameManager.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst START_TIMER = 3;\r\n\r\nconst GameManager =  React.forwardRef((props, ref) =>  {\r\n    const [timer, setTimer] = useState(START_TIMER);\r\n    const [forfeit, setForfeit] = useState(false);\r\n\r\n    useEffect(() => {\r\n      if (props.socket !== null) {\r\n        props.socket.on('ready-timer', (server_timer) => {\r\n          setTimer(server_timer);\r\n        })\r\n      }\r\n    }, [props.socket])\r\n\r\n    useEffect(() => {\r\n      if (props.socket !== null)\r\n      {\r\n        props.socket.on('forfeit', () => {\r\n          setForfeit(true);\r\n          // props.socket.disconnect();\r\n        })\r\n      }\r\n    }, [forfeit, props.socket])\r\n    useEffect(() => {\r\n        let intervalId;\r\n        if (timer > 0)\r\n        {\r\n            if (props.socket === null)\r\n            {\r\n              intervalId = setInterval(() => {\r\n                setTimer(timer - 1);\r\n              }, 1000);\r\n            }\r\n            if (ref.current)\r\n                ref.current.innerText = \"Ready \\n\\t \" + timer\r\n        }\r\n        else if (ref.current && !ref.current.innerText.includes(\"Click to play\"))\r\n        {\r\n            intervalId = setInterval(() => {\r\n                if (props.scoreRight.current.innerText === \"10\")\r\n                    ref.current.innerText = \"J2 wins ! \\n Click to quit\"\r\n                else if (props.scoreLeft.current.innerText === \"10\")\r\n                    ref.current.innerText = \"J1 wins ! \\n Click to quit\"\r\n                else if (forfeit)\r\n                  ref.current.innerText = \"You win ! \\n Click to quit\"\r\n                else\r\n                    ref.current.innerText = \"\"\r\n            }, 10);\r\n        }\r\n        return () => clearInterval(intervalId);\r\n      }, [timer, ref, props.scoreLeft, props.scoreRight, forfeit, props.socket]);\r\n\r\n      const HandleReplay = () => { \r\n        if (ref.current.innerText.includes(\"Click to quit\"))\r\n        {\r\n            props.scoreLeft.current.innerText = \"00\";\r\n            props.scoreRight.current.innerText = \"00\";\r\n            props.quitEvent();\r\n        }\r\n      }\r\n    \r\n      return (\r\n        <GameManagerDiv onClick={HandleReplay} ref={ref} width={props.width} height={props.height}></GameManagerDiv>\r\n        )\r\n\r\n      \r\n})\r\n\r\nconst GameManagerDiv = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  text-align: center;\r\n  top: 20%;\r\n  color: red;\r\n  text-shadow: 2px 0 #fff, -2px 0 #fff, 0 2px #fff, 0 -2px #fff,\r\n               1px 1px #fff, -1px -1px #fff, 1px -1px #fff, -1px 1px #fff;\r\n  font-family: 'Keania One', sans-serif;\r\n  font-size: 10vw;\r\n  position: absolute;\r\n`;\r\n\r\nexport default GameManager;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}