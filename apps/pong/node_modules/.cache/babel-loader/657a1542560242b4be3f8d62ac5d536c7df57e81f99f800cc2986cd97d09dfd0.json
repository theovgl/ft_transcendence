{"ast":null,"code":"var _jsxFileName = \"/home/mtogbe/ft_transcendence/apps/pong/src/components/GameBox.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport Ball from './Ball';\nimport Score from './Score';\nimport Character from './Character.js';\nimport GameManager from './GameManager';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameBox = props => {\n  _s();\n  const playerRef = useRef(null);\n  const opponentRef = useRef(null);\n  const scoreLeft = useRef(null);\n  const scoreRight = useRef(null);\n  const managerRef = useRef(null);\n  const ref = useRef(null);\n  const [bounds, setBounds] = useState({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  });\n  const [leftPlayer, setLeftPlayer] = useState({\n    x: 10,\n    y: 20\n  });\n  const [rightPlayer, setRightPlayer] = useState({\n    x: 85,\n    y: 20\n  });\n  // useEffect(() => {\n  //     if (props.socket !== null)\n  //     {\n  //         props.socket.on('menu', () => {\n  //             props.quitEvent();\n  //         })\n  //     }\n  // }, [managerRef.current]);\n\n  useEffect(() => {\n    const calculateHitBox = () => {\n      if (ref.current) {\n        const {\n          left,\n          top,\n          width,\n          height\n        } = ref.current.getBoundingClientRect();\n        setBounds({\n          x: left,\n          y: top,\n          width,\n          height\n        });\n        setLeftPlayer({\n          x: 10 / 100 * width,\n          y: 20 / 100 * height\n        });\n        setRightPlayer({\n          x: 85 / 100 * width,\n          y: 20 / 100 * height\n        });\n      }\n    };\n    const handleResize = () => {\n      calculateHitBox();\n    };\n    calculateHitBox();\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [ref]);\n  if (!ref.current) {\n    return /*#__PURE__*/_jsxDEV(GameBoxDiv, {\n      ref: ref,\n      height: 30,\n      width: 60\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(GameBoxDiv, {\n    ref: ref,\n    height: 30,\n    width: 60,\n    children: [/*#__PURE__*/_jsxDEV(Score, {\n      ref: scoreLeft,\n      left: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Score, {\n      ref: scoreRight,\n      left: 65\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Character, {\n      id: \"Player\",\n      ref: playerRef,\n      controlMode: props.leftPlayer,\n      x: leftPlayer.x,\n      y: leftPlayer.y,\n      socket: props.socket,\n      gameBounds: bounds\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Character, {\n      id: \"Opponent\",\n      ref: opponentRef,\n      controlMode: props.rightPlayer,\n      x: rightPlayer.x,\n      y: rightPlayer.y,\n      gameBounds: bounds,\n      socket: props.socket\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Ball, {\n      managerRef: managerRef,\n      playerRef: playerRef,\n      opponentRef: opponentRef,\n      scoreLeft: scoreLeft,\n      scoreRight: scoreRight,\n      socket: props.socket,\n      gameBounds: bounds\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(GameManager, {\n      ref: managerRef,\n      scoreLeft: scoreLeft,\n      scoreRight: scoreRight,\n      height: props.height,\n      width: props.width,\n      socket: props.socket,\n      quitEvent: props.quitEvent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 13\n  }, this);\n};\n_s(GameBox, \"gRuqx1xDqFHPhLHHUIJyc87m74s=\");\n_c = GameBox;\nconst GameBoxDiv = styled.div`\n  height: 100%;\n  width: 100%;\n  position: absolute;\n`;\n_c2 = GameBoxDiv;\nexport default GameBox;\nvar _c, _c2;\n$RefreshReg$(_c, \"GameBox\");\n$RefreshReg$(_c2, \"GameBoxDiv\");","map":{"version":3,"names":["React","useEffect","useRef","useState","styled","Ball","Score","Character","GameManager","jsxDEV","_jsxDEV","GameBox","props","_s","playerRef","opponentRef","scoreLeft","scoreRight","managerRef","ref","bounds","setBounds","x","y","width","height","leftPlayer","setLeftPlayer","rightPlayer","setRightPlayer","calculateHitBox","current","left","top","getBoundingClientRect","handleResize","window","addEventListener","removeEventListener","GameBoxDiv","fileName","_jsxFileName","lineNumber","columnNumber","children","id","controlMode","socket","gameBounds","quitEvent","_c","div","_c2","$RefreshReg$"],"sources":["/home/mtogbe/ft_transcendence/apps/pong/src/components/GameBox.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport Ball from './Ball';\r\nimport Score from './Score';\r\nimport Character from './Character.js';\r\nimport GameManager from './GameManager';\r\n\r\n\r\nconst GameBox = (props) => {\r\n    const playerRef = useRef(null);\r\n    const opponentRef = useRef(null);\r\n    const scoreLeft = useRef(null);\r\n    const scoreRight = useRef(null);\r\n    const managerRef = useRef(null);\r\n   const ref = useRef(null);\r\n\r\n    const [bounds, setBounds] = useState({x: 0, y: 0, width: 0, height: 0});\r\n    const [leftPlayer, setLeftPlayer] = useState({x: 10, y: 20});\r\n    const [rightPlayer, setRightPlayer] = useState({x: 85, y: 20});\r\n    // useEffect(() => {\r\n    //     if (props.socket !== null)\r\n    //     {\r\n    //         props.socket.on('menu', () => {\r\n    //             props.quitEvent();\r\n    //         })\r\n    //     }\r\n    // }, [managerRef.current]);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n      const calculateHitBox = () => {\r\n        if (ref.current)\r\n        {\r\n          const { left, top, width, height } = ref.current.getBoundingClientRect();\r\n          setBounds({ x: left, y: top, width, height });\r\n          setLeftPlayer({\r\n            x : (10 / 100) * width,\r\n            y : (20 / 100) * height\r\n          })\r\n          setRightPlayer({\r\n            x : (85 / 100) * width,\r\n            y : (20 / 100) * height\r\n          })\r\n        }\r\n      }\r\n\r\n      const handleResize = () => {\r\n        calculateHitBox();\r\n      }\r\n\r\n      calculateHitBox();\r\n\r\n      window.addEventListener('resize', handleResize);\r\n      return () => {\r\n        window.removeEventListener('resize', handleResize);\r\n      }\r\n    }, [ref]);\r\n\r\n    if (!ref.current)\r\n    {\r\n      return (\r\n        <GameBoxDiv ref={ref} height={30} width={60}/>\r\n      )\r\n    \r\n    }\r\n\r\n    return (\r\n            <GameBoxDiv ref={ref} height={30} width={60}>\r\n            <Score ref={scoreLeft} left={20}></Score>\r\n            <Score ref={scoreRight} left={65}></Score>\r\n            <Character id=\"Player\" ref={playerRef} controlMode={props.leftPlayer} x={leftPlayer.x} y={leftPlayer.y} \r\n            socket={props.socket} gameBounds={bounds}/>\r\n            <Character id=\"Opponent\" ref={opponentRef} controlMode={props.rightPlayer}\r\n             x={rightPlayer.x} y={rightPlayer.y} gameBounds={bounds}\r\n             socket={props.socket}/>\r\n            <Ball managerRef={managerRef} playerRef={playerRef} opponentRef={opponentRef}\r\n            scoreLeft={scoreLeft} scoreRight={scoreRight} socket={props.socket} gameBounds={bounds}/>\r\n            <GameManager ref={managerRef} scoreLeft={scoreLeft} scoreRight={scoreRight}\r\n            height={props.height} width={props.width} socket={props.socket} quitEvent={props.quitEvent}\r\n            ></GameManager>\r\n            </GameBoxDiv>\r\n    );\r\n};\r\n\r\n\r\nconst GameBoxDiv = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  position: absolute;\r\n`;\r\n\r\nexport default GameBox;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}